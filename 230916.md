
## âœ… Today I Did

### CMU Database Systems 

#### 16ê°•. Concurrency Control Theory

##### Motivation

Lost updates â‡’ Concurrency Control

Durability â‡’ Recovery

##### Transactions

- the execution of a sequence of one or more operations on a database to perform some higher-level function
- the basic unit of change in a DBMS
- partial transaction are not allowed
- E.g., ê³„ì¢Œì´ì²´
    1. A ê³„ì¢Œ ê¸ˆì•¡ í™•ì¸
    2. A ì¶œê¸ˆ
    3. B  ì…ê¸ˆ

##### Correctness Criteria : ACID

- Atomicity : no partial transaction
- Consistency :  consistent â†’ txn â†’ consisten
- Isolation : as if you're alone
- Durability : survive failures

##### Atomicity

- commit
- abort
- mechanisms
    - logging
    - shadow paging

##### Consistency

ë…¼ë¦¬ì ìœ¼ë¡œ ë§ëŠ” ë°ì´í„°

- Database consistency
- Transaction Consistency - application's responsibility

##### Isolation

â‡’ Concurrency control

##### Concurrency control

- Pessimistic : lock ìœ¼ë¡œ ë§‰ìŒ
- Optimistic : ê·¸ëƒ¥ í•˜ê³  abort
    
    interleaving transactions â‡’ serial í•˜ê²Œ ëœ ê²ƒì²˜ëŸ¼ ê²°ê³¼ê°€ ë‚˜ì˜¤ê¸°ë¥¼ ë°”ëŒ (serializable)
    
    â‡’ Dependency Graph (Read-Read, Read-Write, Write-Write conflicts)
    

#### 17ê°•. Two-Phase Locking

##### Locks

- Shared Lock
- Exclusive Lock

##### Two-Phase Locking (2PL)

: Pessimistic concurrency control protocol

1. Growing Phase
2. Shrinking Phase
- conflict serializability ë³´ì¥
- ë¬¸ì œ : dirty read â‡’ cascading abort

##### Strong Strict Two-Phase Locking (SS2PL)

only releases locks when the txn finishes.

*strict* schedule : dirty readê°€ ì—†ë‹¤. 

- cascading abort ì—†ìŒ
- abort ì‰¬ì›€

##### Deadlock handling

- Deadlock detection : waits-for graph
- Deadlock prevention : ì˜¤ë˜ëœ ê²Œ high-priority
    - Wait-Die: Old â†’ Young ê¸°ë‹¤ë¦¬ê¸° ê°€ëŠ¥
    - Wound-Wait : Youngâ†’Old ê¸°ë‹¤ë¦¬ê¸°

##### Lock Granularities

![ìŠ¤í¬ë¦°ìƒ· 2023-09-16 ì˜¤í›„ 8.31.17.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/a18b2827-2fa7-4662-9575-6540cc9a4444/739749a7-6b8b-46dc-8f31-f9688870bb99/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7_2023-09-16_%EC%98%A4%ED%9B%84_8.31.17.png)

ìƒìœ„ ë…¸ë“œì— intention lock ê±°ëŠ” ë°©ì‹

- Intension-Shared (IS)
- Intention-Exclusive (IX)
- Shared Intention-Exclusive (SIX)

![ìŠ¤í¬ë¦°ìƒ· 2023-09-16 ì˜¤í›„ 8.32.37.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/a18b2827-2fa7-4662-9575-6540cc9a4444/10dfc722-b96b-4949-8951-71b4bf43e026/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7_2023-09-16_%EC%98%A4%ED%9B%84_8.32.37.png)

- locking table : LOCK TABLE A IN SHARE MODE;
- exclusive lock : SELECT * FROM A FOR UPDATE;

### ê¸°ê³„í•™ìŠµì´ë¡ 

- Ridge Regression : l2 norm of model parameters
    - $\hat \beta = (X^TX+\lambda I)^{-1}X^Ty$
- hyperparameter : ì‚¬ëŒì´ ì§€ì • vs model parameter : í•™ìŠµì˜ ëŒ€ìƒ
- Lasso (least absolute shrinkage and selection operator)
    - no closed-form
- Ridge vs. Lasso
  - Lasso : ì˜í–¥ì´ ì ì€ inputì˜ ê³„ìˆ˜ë¥¼ ì•„ì˜ˆ 0ìœ¼ë¡œ ë¬´ì‹œí•˜ëŠ” ê²½í–¥
  - 2ì°¨ì› í‰ë©´ ìƒ MSE ë“±ê³ ì„ ì´ íƒ€ì›ì¸ ì´ìœ  íŒë³„ì‹ìœ¼ë¡œ ë³´ì„

### ë¶„ì‚°ì»´í“¨íŒ…

3. Being open
    - To be open = í‘œì¤€ì ì¸ ë£°ì„ ê³ ìˆ˜í•˜ëŠ” ê²ƒ
        
        â‡’ IDL (Interface Definition Language)ë¥¼ í†µí•´ interfaceë¥¼ ì •ì˜ (syntax)
        
        & natural languageë¥¼ í†µí•´ semantics ì„¤ëª…
        
    - proper specification
        
        : complete(êµ¬í˜„ì„ ìœ„í•œ ëª¨ë“  ì„¤ëª…ì´ ìˆìŒ) & neutral(êµ¬í˜„ì„ ì„¤ëª…í•˜ì§€ ì•ŠìŒ)
        
        - interoperability : ì—¬ëŸ¬ implemenationë“¤ì´ interfaceë§Œì„ ë³´ê³  co-existí•  ìˆ˜ ìˆìŒ
        - portability : applicationì´ ê°™ì€ interface ë‹¤ë¥¸ êµ¬í˜„ì„, ì½”ë“œ ìˆ˜ì • ì—†ì´ ì´ìš©í•  ìˆ˜ ìˆìŒ
        - extensible í™•ì¥ê°€ëŠ¥ì„±
    - separating policy from mechanism
        - application/userê°€ ë³´ëŠ” interface ë§ê³  ë‚´ë¶€ì˜ interfaceë„ í•„ìš”í•˜ë‹¤.
        - e.g., Web caches
            - parameters : storage, exemption, sharing, refreshing
            - ìœ ì €ê°€ parameterë¥¼ ë§ˆìŒëŒ€ë¡œ ë°”ê¿€ ìˆ˜ ìˆë„ë¡ í•¨
            - ìœ ì €ê°€ êµ¬í˜„í•œ ê±¸ plug-iní•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ê¸°ë„ í•¨
4. Being scalable
    - Scalability dimensions
        - **Size scalability**
            - ìœ ì €ë‚˜ ìì›ì„ ì„±ëŠ¥ ì €í•˜ ì—†ì´ ëŠ˜ë¦´ ìˆ˜ ìˆë‹¤
            - limitations of centralized services
                - e.g., single server â‡’ bottleneck
                    - CPU â†’ computational capacity
                    - I/O transfer rate, storage capacity
                    - network between the user and the centralized service
        - **Geographic scalability**
            - LANâ†’WAN latency 1000ë°°
            - WANì€ unreliable, limited bandwidth
            - multipoint communication ì œí•œ (LAN broadcast) â‡’ separate services (naming and directory services)
        - **Administrative scalability**
            - independent administrative domains â†’ conflicting policies (usage, management, security)
            - domain boundaryë¥¼ ë„˜ì–´ì„œë©´ ì„œë¡œ ì‹ ë¢°í•  ìˆ˜ ì—†ë‹¤.
                
                â‡’ security measures between distributed system & new domain
                
            - e.g., computational grid
            
            â†” modern P2P networks : end userë“¤ì´ ì‹œìŠ¤í…œì„ ìš´ì˜ 
            
            ISPê°€ police ì´ìƒì ì´ì§€ë§Œ, í˜„ì¬ íš¨ê³¼ê°€ ì—†ìŒ
            
    - Scaling techniques
        - scaling up : CPU, memory, network ë“± ìš©ëŸ‰ ëŠ˜ë¦¬ê¸°
        - scaling out : more machines
            1. Hiding communication latencies
                - geographical scalabilityì—ì„œ asynchronous communication ì´ìš©
                - interactive applicationë“¤ì€ asynchronous íš¨ê³¼ ì ìŒ â†’ communicationì„ ì¤„ì´ëŠ” ê²ƒì´ ë” ë‚˜ì€ ë°©ë²•ì´ë‹¤. shipping code : Java applets, js ì´ìš©
            2. Distribution of work: partitioning and distribution
                
                e.g., DNS (Internet Domain Name System), WWW - í•˜ë‚˜ì˜ ì„œë²„ê°€ ì•„ë‹˜
                
            3. Replication
                - availability, balance, small  latency
                - caching : clientê°€ ë³µì‚¬
                - ë¬¸ì œ : modify ì–´ë ¤ì›€, consistency problems
    - Pitfalls
        - reliability, security, heterogeneity, topology of the network/ latency, bandwidth/ transport cost/ administrative domains

## â° ë£¨í‹´ ë§Œë“¤ê¸°

ê¸°ìƒ: 13ì‹œ 00ë¶„

ë“±êµ: 15ì‹œ 40ë¶„

í•˜êµ: 23ì‹œ 10ë¶„

ì·¨ì¹¨: 24ì‹œ 30ë¶„ 

## âœ” To-do

- [ ] ì•„ì¹¨ (ëŠ¦ì )
- [x] ì ì‹¬ 13:40 - ë§ˆë¼ìƒ¹ê¶ˆ
- [x] ì €ë… 18:10 - ìƒëŸ¬ë“œ
- [x] CMU Database Systems 16ê°•
- [x] CMU Database Systems 17ê°•
- [ ] CMU Database Systems 18ê°•
- [x] ê¸°ê³„í•™ìŠµì´ë¡  ë…¹ê°• Linear Regression Part 3
- [X] ë¶„ì»´ ì •ë¦¬ (1.2)
- [ ] ì»´íŒŒì¼ëŸ¬ ì •ë¦¬

## ğŸ’­ ì¼ê¸°

í† ìš”ì¼ì´ë¼ì„œ ëŠê¸‹í•˜ê²Œ ìˆë‹¤ê°€ ì—°êµ¬ì‹¤ì— ì™”ë‹¤. í‰ì¼ì— í›„ì„ë©´ì ‘+ì¸ìˆ˜ì¸ê³„, ìš´ë™, ë‹¤ë¥¸ ì „ê³µ ê³µë¶€í•˜ëŠë¼ ê°•ì˜ë¥¼ ëª» ë“¤ì–´ì„œ ë‚˜ì˜¨ ê±´ë°... ì˜¤ëŠ˜ë„ ì¸í„´ì´ ì™œ ì£¼ë§ì— ë‚˜ì™”ëƒê³  í•œ ì†Œë¦¬ ë“¤ì—ˆë‹¤. 

5ì‹œ 7ë¶„ì— ê±´ë•€ ë“±ë¡í•˜ëŸ¬ ê°”ëŠ”ë° 5ì‹œì— ë§ˆê°ì´ë¼ê³  í•´ì„œ ì•„ì£¼ì•„ì£¼ ì†ìƒí–ˆë‹¤. ì›”ìš”ì¼ì— ê¼­!!! 

ê·¸ë˜ë„ ë¿Œë“¯í•œ í•˜ë£¨ì´ë‹¤. í‘¸í•˜í•˜ ë‚´ì¼ì€ ë§ˆìŒ í¸íˆ ë°°ë“œë¯¼í„´ì„ ì¹  ìˆ˜ ìˆê² ë‹¤ :-)

## âœˆ Tomorrow

- [ ] CMU Databases Systems 18ê°• ë§ˆë¬´ë¦¬
- [ ] CMU Databases Systems 19ê°•
- [ ] ë¶„ì»´ ìˆ˜ì—… & ì •ë¦¬ (1.3)
- [ ] ì»´íŒŒì¼ëŸ¬ ìˆ˜ì—… & ë³µìŠµ
- [ ] ê·¼ë¡œ ì‹ ì²­ì„œ ì œì¶œ
- [ ] ì¸ìˆ˜ì¸ê³„ ì¼ì • ì—°ë½
