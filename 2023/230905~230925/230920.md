
## âœ… Today I Did

#### 19ê°•. Multi-Version Concurrency Control

##### MVCC

- Concurrency Control protocol X
    - DBMS's design and implementation
- multiple physical versions of a single logical object
- Key Properties
    - Writers don't block readers
    - Readers don't block writers
- Read-only txn reads a consistent snapshot(logical) using timestamps
- MVCC supports time-travel queries
- Design Decisions
    - Concurrency Control Protocol
    - Version Storage
    - Garbage Collection
    - Index Management

##### Version Storage

- Approach 1. Append-Only Storage
    - Oldest to Newest
    - Newest to Oldest
- Approach 2. Time-Travel Storage
    - Old versions are copied to separate table space
    - main table stores the latest version
- Approach 3. **Delta Storage**
    - time travel storageì™€ ë¹„ìŠ·í•œë° ë°”ë€ attributeë§Œ
    - txnì´ old versionì„ ì½ì„ ë•Œ reverse orderë¡œ ì½ì–´ì„œ recreateí•œë‹¤.

##### Garbage Collection

- Approach 1. Tuple-level
    - Background Vacuuming : periodically does sequential scan and looks for reclaimable version - any storage
    - Cooperative Cleaning : worker threads identify reclaimable versions as they traverse version chain - O2N
- Approach 2. Transaction-level
    - txn : read/write set ì €ì¥
    - DBMS determines when all versions created by a finished transaction are no longer visible

##### Index Management

- primary key index : points to version chain head
    - primary keyë¥¼ ë°”ê¾¸ëŠ” txn â†’ DELETE & INSERTë¡œ ì·¨ê¸‰
- secondary indexes
    - Approach 1. Logical Pointers
        - tuple id & hash table
        - primary indexì˜ í¬ì¸í„°
    - Approach 2. Physical pointers

## â° ë£¨í‹´ ë§Œë“¤ê¸°

ê¸°ìƒ: 08ì‹œ 20ë¶„

ë“±êµ: 09ì‹œ 05ë¶„

í•˜êµ: 18ì‹œ 20ë¶„

ì·¨ì¹¨: 27ì‹œ 10ë¶„ 

## âœ” To-do

- [x] ì ì‹¬ 11:30 - ìƒëŸ¬ë“œ
- [x] ì €ë… 18:30 - ì§€ë‚˜ë‘ ì­ˆê¾¸ë¯¸
- [x] CMU Database Systems 19ê°•
- [ ] ìˆ˜ì¹˜í•´ì„ ê³¼ì œ ì œì¶œ
- [x] ì»´íŒŒì¼ëŸ¬ ìˆ˜ì—…
- [x] ì»´íŒŒì¼ëŸ¬ ê³¼ì œ1
- [x] ì»´íŒŒì¼ëŸ¬ ì •ë¦¬
- [ ] ê¸°ê³„í•™ìŠµì´ë¡  ìˆ˜ì—…
- [x] ê·¼ë¡œ êµì•ˆ ë²ˆì—­ (2ì‹œê°„ - ì‹¤ì§ˆ 40ìª½)

## ğŸ’­ ì¼ê¸°

ì™œ ì´ë ‡ê²Œ ì¡¸ë¦´ê¹Œ? ìˆ˜ì—…ë§Œ ë“¤ìœ¼ë©´ ì¡´ë‹¤ ìš”ì¦˜.

ì§€ë‚˜ë‘ ë†€ë‹¤ê°€ ë“¤ì–´ì™€ì„œ ë¹¨ë˜ë„ ëŒë¦¬ê³  êµì•ˆ ë²ˆì—­ë„ ë°˜ ë„˜ê²Œ í–ˆë‹¤. 

## âœˆ Tomorrow

- [ ] ì ì‹¬ 12:00 - ìƒëŸ¬ë“œ
- [ ] ì €ë… 18:00 - í•™ì‹
- [ ] CMU Database Systems 20ê°•
- [ ] ìˆ˜ì¹˜í•´ì„ ê³¼ì œ ì œì¶œ
- [ ] ê¸°ê³„í•™ìŠµì´ë¡  ìˆ˜ì—…
- [ ] ë¶„ì‚°ì»´í“¨íŒ… ìˆ˜ì—…
- [ ] ìˆ˜ì¹˜í•´ì„ ìˆ˜ì—…
- [ ] ì»´íŒŒì¼ëŸ¬ í”„ë¡œì íŠ¸
- [ ] ê·¼ë¡œ êµì•ˆ ë²ˆì—­ (2ì‹œê°„ - ì‹¤ì§ˆ 40ìª½)
- [ ] ì¸ìˆ˜ì¸ê³„ ì¼ì • ì—°ë½
