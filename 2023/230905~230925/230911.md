
## âœ… Today I Did

### Distributed Systems

#### Design Goals

**1. Supporting Resource Sharing**

- Canonical examples
  - Cloud-based shared storage and files
  - Peer-to-peer assisted multimedia streaming
  - shared mail services (outsourced mail systems)
  - shared web hosting (content distribution networks)

**2. Making Distribution Transparent**
- Types
  - Access Transparency : data representation (machineì´ Big-endian vs. Little endian), access ë°©ì‹ (OSì— ë”°ë¼ \ë‚˜ /ë¥¼ ì‚¬ìš©) 
  - Location Transparency : urlë¡œ ì„œë²„ì˜ ë¬¼ë¦¬ì ì¸ ìœ„ì¹˜ë¥¼ ì•Œ ìˆ˜ ì—†ìŒ
  - Relocation Transparency : web serverì˜ ìœ„ì¹˜ê°€ ë°”ë€œì„ ì•Œ ìˆ˜ ì—†ìŒ
  - Migration Transparency : í†µí™” ì¤‘ ì´ë™í•´ë„ í†µí™” ìƒëŒ€ë°©ì€ ì•Œì§€ ëª»í•¨
  - Replication Transparency : ì€í–‰ì—ì„œ ê³„ì¢Œ ì •ë³´ë¥¼ ë³µì œí•´ë„ ì‚¬ìš©ìëŠ” ëª¨ë¦„
  - Concurrency Transparency : ë‘ ìœ ì €ê°€ íŒŒì¼ì„ ìˆ˜ì •í•˜ëŠ” ê²½ìš° locking mechanismì„ ì´ìš©í•´ì„œ ëª¨ë¥´ê²Œ í•¨
  - Failure Transparency : failureë¡œ recovery ì¤‘ì—ëŠ” ë‹¤ë¥¸ replicaë¡œ redirection ì‹œì¼œì„œ recovery ìƒí™©ì„ ëª¨ë¥´ê²Œ í•¨, server ë‘ ê°œ ì¤‘ í•˜ë‚˜ê°€ ì£½ìœ¼ë©´ í•œ ì„œë²„ë¡œ ë‹¤ ë³´ëƒ„
- Degree of Transparency : ìƒí™©ì— ë”°ë¼ ê°•ì¡°ë˜ëŠ” ê²Œ ìˆì„ ê²ƒì´ë‹¤. full distribution transparencyë¥¼ ë§Œë“¤ í•„ìš”ëŠ” ì—†ë‹¤. 
  - communication latencyëŠ” ìˆ¨ê¸¸ ìˆ˜ ì—†ë‹¤. 
  - ì™„ì „í•œ failure transparencyëŠ” ë¶ˆê°€ëŠ¥í•˜ë‹¤. 
  - full transparencyëŠ” ì„±ëŠ¥ì„ ì €í•˜í•œë‹¤. (replica ì‹¤ì‹œê°„, disk flush ì‹¤ì‹œê°„)
  - exposureë„ ì¢‹ì„ ìˆ˜ ìˆë‹¤. ìœ„ì¹˜ ê¸°ë°˜ ì„œë¹„ìŠ¤, ë‹¤ë¥¸ ì‹œê°„ëŒ€ì˜ ìœ ì €ë“¤ ì²˜ë¦¬, ì„œë²„ ì‘ë‹µ ëŠ¦ëŠ” ê²½ìš° failure ë³´ê³ 
 
**3. Being Open**
- well-defined interfaces : Interface Definition Language (IDL) 
  - ì„ì˜ì˜ í”„ë¡œì„¸ìŠ¤ê°€ ê·¸ interfaceë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œë” í•¨
  - ì„œë¡œ ë‹¤ë¥¸ ê³³ì—ì„œ ê°™ì€ interfaceë¥¼ ë‹¤ë¥´ê²Œ êµ¬í˜„í•˜ê²Œë” í•¨.
- interoperability ìƒí˜¸ìš´ìš©ì„± : ì„œë¡œ ë‹¤ë¥¸ ì‹œìŠ¤í…œì´ë‚˜ êµ¬ì„±ìš”ì†Œë“¤ì´ common standardë§Œì— ì˜ì¡´í•´ì„œ í•¨ê»˜ ìš´ìš©ë  ìˆ˜ ìˆìŒ
- portability ì´ì‹ì„± : ê°™ì€ interfaceë¥¼ êµ¬í˜„í•œ ë‹¤ë¥¸ ì‹œìŠ¤í…œì—ì„œ ì–´ë–¤ applicationì„ ìˆ˜ì • ì—†ì´ ë°”ë¡œ ëŒë ¤ë„ ëœë‹¤. 
- composability êµ¬ì„±ê°€ëŠ¥ì„± : ì‹œìŠ¤í…œ êµ¬ì„±, êµ¬ì„±ìš”ì†Œ ì¶”ê°€, ëŒ€ì²´ ì‰¬ì›Œì•¼í•œë‹¤. 
- extensibility í™•ì¥ì„±
- Policies ì •ì±… vs. Mechanisms ì›ë¦¬ (ë°©ì‹)
  - policies : behaviorë¥¼ configure
  - mechanisms: allow dynamic settings
  - e.g., web caching : ë¸Œë¼ìš°ì €ëŠ” userê°€ ì—¬ëŸ¬ parameterë¥¼ ì¡°ì ˆí•  ìˆ˜ ìˆê²Œ í•¨

**4. Being Scalable**
- Scalability dimensions
  - Size scalability : ë™ì‹œì ‘ì†ì ë§ì€ ê²½ìš°
    - computational capacity (CPU), storage capacity, transfer rate (disks), network (linkì—ì„œ ë³‘ëª©í˜„ìƒ)
  - Geographical scalability
    - LAN -> WAN : response latencyê°€ ê¸¸ì–´ì ¸ì„œ ë¬¸ì œ
    - WAN links are unreliable
    - multipoint communication ë¶ˆê°€ëŠ¥ (broadcast ë¶ˆê°€ëŠ¥) -> naming & directory serviceë¡œ í•´ê²°
  - Administrative scalability : í•´ì™¸ ë¡œë° ì‹œ ë¬¸ì œ 
    - computational grids : ë„ë©”ì¸ ê°„ ë¹„ì‹¼ ìì›
    - shared equipment : 
    - exception : p2p networkëŠ” administrative entity ê´€ì—¬í•˜ì§€ ì•Šì•„ì„œ ê´œì°®ë‹¤. 

### CMU Database Systems

#### 11ê°• Join Algorithms

- **Hash Join**
  - Phase 1. Build : Rì— ëŒ€í•œ hash table ë§Œë“¤ê¸°
  - Phase 2. Probe : Sì˜ íŠœí”Œì— ëŒ€í•´ hash ê°’ ê²Œì‚° í›„ join
- Probe Phase Optimization
  - Build Phaseì—ì„œ bloom filter ë§Œë“¤ê¸°
  - Probe Phaseì—ì„œ bloom filter í™•ì¸ í›„ hash table ì ‘ê·¼
- Grace Hash Join
  - Phase 1. Build : R, S ë‘˜ ë‹¤ partition
  - Phase 2. Probe : matching bucketë“¤ ë‚´ë¶€ì—ì„œ join
  - Recursive Partitioning : ë©”ëª¨ë¦¬ì— ë“¤ì–´ê°ˆ ìˆ˜ ìˆë„ë¡ ì—¬ëŸ¬ ë²ˆ hashing
  - 3 * (M + N) 

#### 12ê°• Query Execution Part 1.
##### Processing Model
- Approach 1. Iterator Model (Volcano model, Pipeline model)
  - Next functionì´ í•˜ë‚˜ì˜ tupleì„ ë°˜í™˜
- Approach 2. Materialization Model
  - Output functionì´ ëª¨ë“  tuple ë°˜í™˜
  - OLTP > OLAPì— ìœ ë¦¬
- Approach 3. **Vectorized / Batch Model**
  - Next function returns a batch of tuples
  - Ideal for OLAP queries 
  - used vectorized (SIMD) instructions
 
##### Access Methods
- Sequential Scan
  - for loops
  - cursorë¡œ ê°€ì¥ ë§ˆì§€ë§‰ìœ¼ë¡œ ë³¸ page/slotì„ ì¶”ì 
  - Optimizations
    - prefetching
    - buffer pool bypass
    - parallelization
    - **zone maps**
      - pageì— ëŒ€í•œ aggregate(MIN, MAX, AVG, SUM, COUNT)ë¥¼ ë¯¸ë¦¬ ê³„ì‚°í•´ë†“ìŒ
      - page ë‚´ë¶€ì— ì €ì¥í•˜ê±°ë‚˜, zone map pageë¥¼ ë”°ë¡œ ë‘ê¸°ë„ í•¨
    - **late materialization**
      - joinì—ì„œ ë‹¤ë¤˜ìŒ
      - column stored dataì˜ ê²½ìš° record idë§Œ ì €ì¥ í›„ ë‚˜ì¤‘ì— í•„ìš”í•œ columnë§Œ materialize
    - **heap clustering**
      - heap ë‚´ë¶€ì—ì„œë„ ì •ë ¬ë˜ì–´ ìˆìŒ -> clustering indexì˜ attributeë¥¼ ì‚¬ìš©í•˜ëŠ” queryì˜ ê²½ìš° leaf node scan ê°€ëŠ¥
- Index Scan
  - ì—¬ëŸ¬ ì¸ë±ìŠ¤ ì¤‘ selectiveí•œ ê²ƒì„ ì‚¬ìš©í•˜ëŠ” ê²Œ ìœ ë¦¬
  - unclustered index -> index scan page sorting
- Multi-Index = Bitmap Scan : extension
  - ì—¬ëŸ¬ index ì¨ì„œ union/intersect ë“±
  - bitmap, hash table, Bloom filter ë“±

##### Expression Evaluation

- where clauseë¥¼ expression treeë¡œ í‘œí˜„ í›„ ê³„ì‚°í•˜ë©´ ëŠë¦¬ë‹¤.
- tree dfsë¡œ ê³„ì‚°í•˜ì§€ ì•Šê³  JIT (just in time) compilationí•˜ë©´ ë¹ ë¥´ë‹¤.

#### 13ê°• Query Execution Part 2.

##### Process Models

- Process per DBMS Worker
  - OS Scheduler
  - shared-memory for global data structures

- Process Pool

- Thread per DBMS Worker

##### Execution Parallelism

##### I/O Parallelism

## â° ë£¨í‹´ ë§Œë“¤ê¸°

ê¸°ìƒ: 08ì‹œ 20ë¶„

ë“±êµ: 09ì‹œ 00ë¶„

í•˜êµ: 19ì‹œ 30ë¶„

ì·¨ì¹¨: 25ì‹œ 30ë¶„ 

## âœ” To-do
- [x] ì•„ì¹¨ 9ì‹œ - ë¸Œí€¸ ì´ˆì½” 1/2
- [x] ì ì‹¬ 12ì‹œ - ì˜¤ì†Œë¦¬êµ­ë°¥, ë ˆëª¬ìš”ê±°íŠ¸ìŠ¤ë¬´ë”” 1/2
- [x] ì €ë… 20ì‹œ - ëˆì¹´ìŠ¤, ì¹´ë ˆ
- [x] ì»´íŒŒì¼ëŸ¬ì„¤ê³„ ìˆ˜ì—… ë“£ê¸°
- [ ] ì»´íŒŒì¼ëŸ¬ì„¤ê³„ ë‹¹ì¼ ë³µìŠµ
- [x] ë¶„ì‚°ì»´í“¨íŒ… ìˆ˜ì—… ë“£ê¸°
- [x] ë¶„ì‚°ì»´í“¨íŒ… ë‹¹ì¼ ë³µìŠµ - ì§„í–‰ ì¤‘
- [x] ì»´íŒŒì¼ëŸ¬ì„¤ê³„ ëŸ¬ë‹í˜ì´ìŠ¤ë©”ì´ì»¤ ì‹ ì²­
- [ ] êµìˆ˜ë‹˜ê»˜ í–‰ì • í›„ì„ ë©´ì ‘ ê´€ë ¨ ë§ì”€ë“œë¦¬ê¸°
- [x] CMU Databases Systems 11ê°• ë§ˆë¬´ë¦¬
- [x] CMU Databases Systems 12ê°•
- [x] CMU Databases Systems 13ê°• - ì§„í–‰ ì¤‘
- [ ] CMU Databases Systems 14ê°•

## ğŸ’­ ì¼ê¸°

êµìˆ˜ë‹˜ê»˜ì„œ 10ê°•ì´ë‚˜ ë“¤ì—ˆë‹¤ê³  ë†€ë¼ì…¨ë‹¤ëŠ” ê±¸ ë“¤ì—ˆë‹¤. ëŠë¦¬ë‹¤ê³  ìƒê°í–ˆëŠ”ë° ë‹¤í–‰ì´ë‹¤ ^O^ 

ê·¸ë¦¬ê³  ptë¥¼ ëŠì–´ì•¼ê² ë‹¤. ë” ì´ìƒ ë¯¸ë£° ìˆ˜ ì—†ë‹¤. 

## âœˆ Tomorrow

- [ ] ì €ë… - í–‰ì • í›„ì„ ë©´ì ‘ 18:30
- [ ] ë¯¸ìš©ì‹¤ ì»¤íŠ¸ 11:00
- [ ] ìˆ˜ì¹˜í•´ì„ ìˆ˜ì—… 14:30
- [ ] ì»´íŒŒì¼ëŸ¬ì„¤ê³„ ë³µìŠµ
- [ ] ë¶„ì‚°ì»´í“¨íŒ… ë³µìŠµ
- [ ] CMU Databases Systems 13ê°• ë§ˆë¬´ë¦¬
- [ ] CMU Databases Systems 14ê°•
